<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>HelpOnEditLocks - Geekbone.Org</title>
<script type="text/javascript" src="../htdocs/common/js/common.js"></script>

<script type="text/javascript">
<!--// common functions

// We keep here the state of the search box
searchIsDisabled = false;

function searchChange(e) {
    // Update search buttons status according to search box content.
    // Ignore empty or whitespace search term.
    var value = e.value.replace(/\s+/, '');
    if (value == '' || searchIsDisabled) { 
        searchSetDisabled(true);
    } else {
        searchSetDisabled(false);
    }
}

function searchSetDisabled(flag) {
    // Enable or disable search
    document.getElementById('fullsearch').disabled = flag;
    document.getElementById('titlesearch').disabled = flag;
}

function searchFocus(e) {
    // Update search input content on focus
    if (e.value == 'Search') {
        e.value = '';
        e.className = '';
        searchIsDisabled = false;
    }
}

function searchBlur(e) {
    // Update search input content on blur
    if (e.value == '') {
        e.value = 'Search';
        e.className = 'disabled';
        searchIsDisabled = true;
    }
}

function actionsMenuInit(title) {
    // Initialize action menu
    for (i = 0; i < document.forms.length; i++) {
        var form = document.forms[i];
        if (form.className == 'actionsmenu') {
            // Check if this form needs update
            var div = form.getElementsByTagName('div')[0];
            var label = div.getElementsByTagName('label')[0];
            if (label) {
                // This is the first time: remove label and do buton.
                div.removeChild(label);
                var dobutton = div.getElementsByTagName('input')[0];
                div.removeChild(dobutton);
                // and add menu title
                var select = div.getElementsByTagName('select')[0];
                var item = document.createElement('option');
                item.appendChild(document.createTextNode(title));
                item.value = 'show';
                select.insertBefore(item, select.options[0]);
                select.selectedIndex = 0;
            }
        }
    }
}
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../htdocs/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../htdocs/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../htdocs/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../htdocs/modern/css/projection.css">


<link rel="Start" href="../Geekbone">
<link rel="Alternate" title="Wiki Markup" href="../HelpOnEditLocks%3Faction=raw">
<link rel="Alternate" media="print" title="Print View" href="../HelpOnEditLocks%3Faction=print">
<link rel="Search" href="../FindPage">
<link rel="Index" href="../TitleIndex">
<link rel="Glossary" href="../WordIndex">
<link rel="Help" href="../HelpOnFormatting">
</head>

<body lang="en" dir="ltr">

<div id="header">
<div id="logo"><a href="../Geekbone">Geekbone.Org</a></div>

<form id="searchform" method="get" action="">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit" value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit" value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="../HelpOnEditLocks%3Faction=login" id="login">Login</a></li></ul>
<div id="locationline">


<ul id="pagelocation">
<li><a class="backlink" title="Click to do a full-text search for this title" href="../HelpOnEditLocks%3Faction=fullsearch%26value=linkto%3A%22HelpOnEditLocks%22%26context=180">HelpOnEditLocks</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../Geekbone">Geekbone</a></li>
<li class="wikilink"><a href="../RecentChanges">RecentChanges</a></li>
<li class="wikilink"><a href="../FindPage">FindPage</a></li>
<li class="wikilink"><a href="../HelpContents">HelpContents</a></li>
<li class="current"><a href=".">HelpOnEditLocks</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar">
<li><span class="disabled">Immutable Page</span></li>
<li><a href="../HelpOnEditLocks%3Faction=info">Info</a></li>
<li><a href="../HelpOnEditLocks%3Faction=AttachFile">Attachments</a></li>
<li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li>
</ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<span class="anchor" id="top"></span>
<span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867">
</p>
<h2 id="head-53805a9a73ad0b807091381507b7fdbc1261d775">Locking against concurrent editing</h2>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">If two people try and edit the same wiki page at once some nasty conflicts can occur. Without any kind of warning system one of the editors can save the page, which leaves the other editor with a message warning them about the conflict. An easy way around this is to display warnings for editors that try to start editing wiki pages that are already being edited. i.e. the wiki keeps track of pages being edited. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span></p>
<p class="line862">This can be done in Moin using the <em>editlock</em> system. There are three levels of locking: to <em>warn</em>, to <em>lock</em> and <em>None</em> (turned off). <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span></p>
<p class="line862">If you configure Moin to <strong>warn</strong>, when someone tries to edit a page that is already being edited, they will be presented with a warning message asking them to consider waiting until the current editor has finished. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></p>
<p class="line862">Moin can also be configured to <strong>lock</strong> an edited page, only during editing. Here, if some tries to edit a page that is being edited they will receive a message saying that the page is locked and will not be able to edit it until the editor has finished. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></p>
<p class="line874">A complication of this feature is that an editing session might be started and might not be finished. e.g.: <span class="anchor" id="line-20"></span></p>
<ul>
<li>Someone presses edit and then clicks on a link to exit the page without cancelling. <span class="anchor" id="line-21"></span>
</li>
<li>The browser window is closed without cancelling. <span class="anchor" id="line-22"></span>
</li>
<li>The back button is pressed. <span class="anchor" id="line-23"></span>
</li>
<li>Someone starts editing a page and forgets and leaves it open overnight. <span class="anchor" id="line-24"></span>
</li>
</ul>
<p class="line862">This would result in a page having permanent warnings or being permanently locked. Therefore, both <em>warn</em> and <em>lock</em> have a <strong>timeout</strong> feature. After a specified number of minutes the feature expires. Note that the timer restarts when you hit preview. If you are actively editing a page and hit preview it is assumed you are still busy and the timer starts again. If you leave the page, or exit it for more time than the timer allows the edit locking runs out and other people are free to edit the page. <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span></p>
<p class="line867">
</p>
<h3 id="head-6543e4c665ccfab98b05f72decdd5e392d83993e">Configuration</h3>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line862">The <tt class="backtick">edit_locking</tt> config variable controls the behaviour of the locking system. This can have the following values: <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span></p>
<ul>
<li><p class="line891"><tt class="backtick">None</tt>, i.e. there is no edit locking. The feature is turned off and nobody is warned or stopped from doing simultaneous edits of a page. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></p></li>
<li class="gap"><p class="line862">"<tt class="backtick">warn &lt;timeout&gt;</tt>" tells Moin to warn anyone trying to concurrently editing a page, with a specified timeout, e.g. "<tt class="backtick">warn 10</tt>" will warn for 10 minutes after an edit is started. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></p></li>
<li class="gap"><p class="line862">"<tt class="backtick">lock &lt;timeout&gt;</tt>" tells Moin to lock a page for the specified amount of time after an edit started. e.g. "<tt class="backtick">lock 5</tt>" locks a page for 5 minutes. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span></p></li>
</ul>
<p class="line867">
</p>
<h3 id="head-daff9a7a66b0607ad080855cf647d9a943603cbb">Aborting an edit</h3>
<span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line862">For the reasons explained in the timeout description above, you should <strong>always use Cancel</strong> to cancel an edit if you have enabled edit locking! <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span></p>
<p class="line867">
</p>
<h2 id="head-2f94fe735a697a006d00de9daf585080f6069fbb">Example</h2>
<span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line862">Sample interaction of John<tt class="backtick"></tt>Miller and Jane<tt class="backtick"></tt>Doe... <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span></p>
<dl>
<dt>no locking (None)</dt>
<dd><p class="line862">John<tt class="backtick"></tt>Miller starts editing a page and Jane<tt class="backtick"></tt>Doe thinks she'll edit the same page. She has no idea that someone else is editing the page so they both edit away and hit save. It doesn't matter who started first and did the most editing, whoever hits <em>save changes</em> first will have their changes committed and the unfortunate 2nd editor will have to try and merge their changes in or lose them. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span></p></dd>
<dt>edit warnings (warn)</dt>
<dd><p class="line862">John<tt class="backtick"></tt>Miller starts editing a page and Jane<tt class="backtick"></tt>Doe thinks she'll edit the same page. When she hits edit she'll see a warning telling her that someone else got there first. If she is polite she'll leave the page, but she can still save before John and he may lose his changes. <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span></p></dd>
<dt>edit locking (lock)</dt>
<dd><p class="line862">John<tt class="backtick"></tt>Miller starts editing a page and Jane<tt class="backtick"></tt>Doe thinks she'll edit the same page. When she hits edit she'll see a warning telling her that someone else got there first and the page is locked. She will have to wait for the page to become available. <span class="anchor" id="line-49"></span></p></dd>
</dl>
<span class="anchor" id="bottom"></span>
</div>
<p id="pageinfo" class="info" lang="en" dir="ltr">HelpOnEditLocks  (last modified 2006-06-30 07:21:42)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar">
<li><span class="disabled">Immutable Page</span></li>
<li><a href="../HelpOnEditLocks%3Faction=info">Info</a></li>
<li><a href="../HelpOnEditLocks%3Faction=AttachFile">Attachments</a></li>
<li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li>
</ul>

<ul id="credits">
<li><a href="http://moinmoin.wikiwikiweb.de/">MoinMoin Powered</a></li>
<li><a href="http://www.python.org/">Python Powered</a></li>
<li><a href="http://validator.w3.org/check?uri=referer">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>
