<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>HelpOnUpdating - Geekbone.Org</title>
<script type="text/javascript" src="../htdocs/common/js/common.js"></script>

<script type="text/javascript">
<!--// common functions

// We keep here the state of the search box
searchIsDisabled = false;

function searchChange(e) {
    // Update search buttons status according to search box content.
    // Ignore empty or whitespace search term.
    var value = e.value.replace(/\s+/, '');
    if (value == '' || searchIsDisabled) { 
        searchSetDisabled(true);
    } else {
        searchSetDisabled(false);
    }
}

function searchSetDisabled(flag) {
    // Enable or disable search
    document.getElementById('fullsearch').disabled = flag;
    document.getElementById('titlesearch').disabled = flag;
}

function searchFocus(e) {
    // Update search input content on focus
    if (e.value == 'Search') {
        e.value = '';
        e.className = '';
        searchIsDisabled = false;
    }
}

function searchBlur(e) {
    // Update search input content on blur
    if (e.value == '') {
        e.value = 'Search';
        e.className = 'disabled';
        searchIsDisabled = true;
    }
}

function actionsMenuInit(title) {
    // Initialize action menu
    for (i = 0; i < document.forms.length; i++) {
        var form = document.forms[i];
        if (form.className == 'actionsmenu') {
            // Check if this form needs update
            var div = form.getElementsByTagName('div')[0];
            var label = div.getElementsByTagName('label')[0];
            if (label) {
                // This is the first time: remove label and do buton.
                div.removeChild(label);
                var dobutton = div.getElementsByTagName('input')[0];
                div.removeChild(dobutton);
                // and add menu title
                var select = div.getElementsByTagName('select')[0];
                var item = document.createElement('option');
                item.appendChild(document.createTextNode(title));
                item.value = 'show';
                select.insertBefore(item, select.options[0]);
                select.selectedIndex = 0;
            }
        }
    }
}
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../htdocs/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../htdocs/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../htdocs/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../htdocs/modern/css/projection.css">


<link rel="Start" href="../Geekbone">
<link rel="Alternate" title="Wiki Markup" href="../HelpOnUpdating%3Faction=raw">
<link rel="Alternate" media="print" title="Print View" href="../HelpOnUpdating%3Faction=print">
<link rel="Search" href="../FindPage">
<link rel="Index" href="../TitleIndex">
<link rel="Glossary" href="../WordIndex">
<link rel="Help" href="../HelpOnFormatting">
</head>

<body lang="en" dir="ltr">

<div id="header">
<div id="logo"><a href="../Geekbone">Geekbone.Org</a></div>

<form id="searchform" method="get" action="">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit" value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit" value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="../HelpOnUpdating%3Faction=login" id="login">Login</a></li></ul>
<div id="locationline">


<ul id="pagelocation">
<li><a class="backlink" title="Click to do a full-text search for this title" href="../HelpOnUpdating%3Faction=fullsearch%26value=linkto%3A%22HelpOnUpdating%22%26context=180">HelpOnUpdating</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../Geekbone">Geekbone</a></li>
<li class="wikilink"><a href="../RecentChanges">RecentChanges</a></li>
<li class="wikilink"><a href="../FindPage">FindPage</a></li>
<li class="wikilink"><a href="../HelpContents">HelpContents</a></li>
<li class="current"><a href=".">HelpOnUpdating</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar">
<li><span class="disabled">Immutable Page</span></li>
<li><a href="../HelpOnUpdating%3Faction=info">Info</a></li>
<li><a href="../HelpOnUpdating%3Faction=AttachFile">Attachments</a></li>
<li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li>
</ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<span class="anchor" id="top"></span>
<span class="anchor" id="line-8"></span><p class="line867"><a href="../HelpContents">HelpContents</a> &gt; <a href="../HelpOnAdministration">HelpOnAdministration</a> &gt; HelpOnUpdating  <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p>
<p class="line867"><strong>Index</strong> <span class="anchor" id="line-11"></span></p>
<div class="table-of-contents">
<p class="table-of-contents-heading">Contents</p>
<ol>
<li>
<a href="#head-e9fc017905cde431b9eb693851523c71c81b9a9e">General procedures</a><ol>
<li><a href="#head-6c62d24dd986c08a1a21ae0a6e2c4548f79f989d">Backup</a></li>
<li><a href="#head-28a7e259e240e06c446a4e260ad6a96322de263d">Install</a></li>
<li><a href="#head-1409f14b1d4801cdc1cfa7a7d31ebe9011a350f1">Configuration update</a></li>
<li><a href="#head-93651cf60ec7638f011aa01673f747b168e68c9e">Updating files</a></li>
<li><a href="#head-7aa313a5b6991fdd59b559e6d7c26fb14442e8b7">Troubleshooting</a></li>
</ol>
</li>
<li>
<a href="#head-b3a424f875af1a1f08e21a2a771ecd7459a6d4dc">Upgrade information for specfic versions</a><ol>
<li><a href="#head-d45ca8cc7a44289d82ff1d58582c89bb638f3fcd">Version 1.0</a></li>
<li><a href="#head-ab06519c303d7468ebd774ccade247864c85511f">Version 1.1</a></li>
<li><a href="#head-b67c2d9266310861577c255faf04abda607713c7">Version 1.2</a></li>
<li><a href="#head-6b39642936e912c76ea6eec794a0ce182bf5f751">Version 1.2.1, 1.2.2, 1.2.3</a></li>
<li><a href="#head-885bb59e03f7d8413a74525f49383a18875e69ee">Version 1.3 and above</a></li>
<li><a href="#head-64b74b335c0bb5764150db10b4f12dc7b9b1154f">Deprecation Note</a></li>
</ol>
</li>
</ol>
</div> <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line867">
</p>
<h2 id="head-e9fc017905cde431b9eb693851523c71c81b9a9e">General procedures</h2>
<span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line867">
</p>
<h3 id="head-6c62d24dd986c08a1a21ae0a6e2c4548f79f989d">Backup</h3>
<span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line867"><img alt="/!\" height="15" src="../htdocs/modern/img/alert.png" title="/!\" width="15"> <strong>Before you update an existing wiki, MAKE A BACKUP!</strong> <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></p>
<p class="line862">You have been warned, and it's not our fault when you end up like this: <img alt="X-(" height="15" src="../htdocs/modern/img/angry.png" title="X-(" width="15">  <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p>
<p class="line874">There are two directory trees which you should backup: <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p>
<ul>
<li><p class="line862">The one containing the <a href="../MoinMoin">MoinMoin</a> executable files (e.g. <tt>/usr/lib/python*.*/site-packages/MoinMoin</tt>) <span class="anchor" id="line-24"></span></p></li>
<li><p class="line862">and the one containing the data (e.g. <tt>/usr/share/moin/wikiname/data</tt> - see data_dir in your moin_config.py).  <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span></p></li>
</ul>
<p class="line874">The pathes depend on your installation. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span></p>
<p class="line867">
</p>
<h3 id="head-28a7e259e240e06c446a4e260ad6a96322de263d">Install</h3>
<span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line862">Download the <a href="../MoinMoin">MoinMoin</a> code that you are interested in updating to. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></p>
<p class="line862">As root, run "<tt>python setup.py install</tt>" to install the new version. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></p>
<p class="line867">
</p>
<h3 id="head-1409f14b1d4801cdc1cfa7a7d31ebe9011a350f1">Configuration update</h3>
<span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line874">After upgrading, your existing wiki should continue to work (the goal is to have sane defaults for any new config values, but then there can be bugs). Check that this is indeed the case, and then take the time to check the CHANGES file in your distribution. Often, new features will be invisible unless your extend your configuration in "moin_config.py" (1.3: wikiconfig.py). <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span></p>
<p class="line874">This is especially true for: <span class="anchor" id="line-39"></span></p>
<ul>
<li><p class="line862">somewhat dangerous macros that won't be activated by default, because they're not advisable for public wikis. You need to explicitely activate those by adding an <tt>allowed_actions</tt> list to the config. Currently, the actions <tt>DeletePage</tt> and <tt>AttachFile</tt> are considered unsafe. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p></li>
<li class="gap"><p class="line862">email features: you need to provide <tt>mail_smarthost</tt> and <tt>mail_from</tt>. <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></p></li>
<li class="gap"><p class="line862">new pages icons: to get new icons like "XML", "Subscribe" etc. it's best to just delete the <tt>page_icons</tt> setting, now that "config.py" has a default for it. If you changed it in the past, add new icons from the "config.py" default to your "moin_config.py". <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span></p></li>
</ul>
<p class="line867">
</p>
<h3 id="head-93651cf60ec7638f011aa01673f747b168e68c9e">Updating files</h3>
<span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><dl>
<dt>Images and CSS</dt>
<dd>On every update, you should copy the content of the "share/moin/htdocs/" directory to the directory visible to your web server, normally a new release has some new images and CSS in it. If you use the default distutils setup scheme, this is no longer necessary (distutils updates the files for you, and your webserver gets the files from the installed images and CSS). <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span>
</dd>
<dt>System pages</dt>
<dd>When upgrading to a new version, copy at least the help pages ("Help*") to your existing directory. Then check whether you miss any new system pages. In 1.3 these pages are kept separate in the underlay directory. <span class="anchor" id="line-50"></span><ul>
<li>
<p class="line862">When updating from 1.2 or lower to 1.3 or higher, you will want to clean out the copies of the system pages in your <tt>wiki/data</tt> directory. All of these pages will now reside in the underlay directory. If you have system pages from 1.2 or lower in your <tt>wiki/data</tt> directory, they will overshadow the more up-to-date documentation. This can be done using the following manual procedure: <span class="anchor" id="line-51"></span></p>
<ol type="1">
<li>You have just converted from 1.2 or lower to post-1.3. <span class="anchor" id="line-52"></span>
</li>
<li><p class="line862">Go to your wiki's EditedSystemPages. <span class="anchor" id="line-53"></span></p></li>
<li><p class="line862">Find all the pages that are MoinMoin system or help pages. You will know if it is one of those pages because it is not your page. <span class="anchor" id="line-54"></span></p></li>
<li>Check if it is okay to delete by either: <span class="anchor" id="line-55"></span><ol type="1">
<li>Using the this page "info" link and check the Revision History to see if it is greater than 1. If so, there are modifications, so do not delete the page and evaluate the modifications to see if they are necessary. <span class="anchor" id="line-56"></span>
</li>
<li><p class="line862">Using your file browser (Windows Explorer, etc) to go to your <tt>wiki/data/&lt;&lt;systemPage&gt;&gt;/revisions</tt> directory and to see if there are no modifications. If there are, do not delete the page and evaluate the modifications to see if they are necessary. <span class="anchor" id="line-57"></span></p></li>
</ol>
</li>
<li><p class="line862">(If you have useful edits, please contribute them to the <a class="http" href="http://moinmaster.wikiwikiweb.de/">MoinMoin development</a>.) <span class="anchor" id="line-58"></span></p></li>
<li><p class="line862">Delete that <tt>wiki/data/&lt;&lt;systemPage&gt;&gt;</tt> using your file browser. <span class="anchor" id="line-59"></span></p></li>
</ol>
</li>
<li>Japanese translation follows. <span class="anchor" id="line-60"></span>
</li>
<li>
<p class="line862">1.2以前から1.3以降のアップグレードの際、<tt>wiki/data</tt>ディレクトリに置いた、システムページのコピーを削除した方が良い。これからこのページはunderlayディレクトリに置く。もし1.2以前のシステムページが<tt>wiki/data</tt>ディレクトリにある場合、最も最新システムページをかぶせてしまう。以下のとおり、手動の手順： <span class="anchor" id="line-61"></span></p>
<ol type="1">
<li>以前から1.3以降のアップグレードを行ったばかり。 <span class="anchor" id="line-62"></span>
</li>
<li><p class="line862">自分の<a href="../EditedSystemPages">EditedSystemPages</a>を開く。 <span class="anchor" id="line-63"></span></p></li>
<li><p class="line891">MoinMoinのシステムやヘルプページなどを探す。そのページがシステムやヘルプページであることは、自分のページではないことで分かる。 <span class="anchor" id="line-64"></span></p></li>
<li>削除する前の確認を行う。以下のどちらの方法とする： <span class="anchor" id="line-65"></span><ol type="1">
<li>このページの「情報」をクリックして、「"更新履歴"を表示」のページでは更新回数が1以上のこと。そうだったら、変更はあるので、削除しないで、その変更の必要性を判断する。 <span class="anchor" id="line-66"></span>
</li>
<li><p class="line862">ファイルブラウザアプリケーション（Windowsエクスプロラーなど）で、自分の<tt>wiki/data/&lt;&lt;systemPage&gt;&gt;/revisions</tt>ディレクトリにたどりつけて、変更があることを確認する。そうだったら、変更はあるので、削除しないで、その変更の必要性を判断する。 <span class="anchor" id="line-67"></span></p></li>
</ol>
</li>
<li><p class="line862">(有効な変更があれば、 <a class="http" href="http://moinmaster.wikiwikiweb.de/">MoinMoin development</a>にぜひ与えてください。) <span class="anchor" id="line-68"></span></p></li>
<li><p class="line862">そのページ<tt>wiki/data/&lt;&lt;systemPage&gt;&gt;</tt>をファイルブラウザアプリケーションで削除する。 <span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span></p></li>
</ol>
</li>
</ul>
</dd>
<dt>InterWiki</dt>
<dd><p class="line862">Check that you have the newest "intermap.txt" file; If you have your own entries, you can point "shared_intermap" at a file loaded <em>before</em> the file in your data directory, which takes precedence (i.e. have global entries in the shared one, private entries the data dir file). <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span></p></dd>
</dl>
<p class="line867">
</p>
<h3 id="head-7aa313a5b6991fdd59b559e6d7c26fb14442e8b7">Troubleshooting</h3>
<span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><p class="line874">A good idea is to do a request for "moin.cgi?action=test" (which calls an internal diagnosis feature) after you installed a new release, which will spot some common errors. <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span></p>
<p class="line862">Depending on your installation, more tightly secured permissions are a good idea. Ideally, you assign all files in the data directory to the user the web server runs under, and then you use <tt class="backtick">700</tt> or <tt class="backtick">755</tt>. <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span></p>
<p class="line867">
</p>
<h2 id="head-b3a424f875af1a1f08e21a2a771ecd7459a6d4dc">Upgrade information for specfic versions</h2>
<span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line874">The following sections provide information pertaining to specific versions of the software; if you jump several versions, read all the sections applying to your situation. <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p>
<p class="line867"><span class="anchor" id="update-1-0"></span> <span class="anchor" id="line-83"></span>
</p>
<h3 id="head-d45ca8cc7a44289d82ff1d58582c89bb638f3fcd">Version 1.0</h3>
<span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line874">Version 1.0 is the last to support Python 1.5.2, but some optional features (like statistics) already require Python 2.0. <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span></p>
<p class="line867"><span class="anchor" id="update-1-1"></span> <span class="anchor" id="line-89"></span>
</p>
<h3 id="head-ab06519c303d7468ebd774ccade247864c85511f">Version 1.1</h3>
<span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><p class="line862">Be sure to read the above section on <em>General procedures</em> before you start upgrading. <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span></p>
<p class="line867"><strong>Version 1.1 requires Python 2.0 or higher</strong>, we recommend to use Python 2.2 (version 2.2.2 if that is available on your host) or even better &gt;= 2.3.2 (with 2.3.x, <a href="../MoinMoin">MoinMoin</a> runs about 20-30% faster). <span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span></p>
<p class="line867"><strong>Upgrading your configuration</strong> <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span></p>
<ul>
<li><p class="line862">If you changed the default for <tt class="backtick">page_template_ending</tt>, this is now called <tt class="backtick">page_template_regex</tt> and must contain a regex (defaults to '[a-z]Template$'). <span class="anchor" id="line-99"></span></p></li>
<li><p class="line862">Same applies to <tt class="backtick">page_form_ending</tt> now called <tt class="backtick">page_form_regex</tt> (default: '[a-z]Form$') <span class="anchor" id="line-100"></span></p></li>
<li><p class="line862">Not a new feature, but configurable now: <tt class="backtick">page_category_regex</tt> (default: '^Category[A-Z]') <span class="anchor" id="line-101"></span></p></li>
<li><p class="line862">If you have added your own <tt class="backtick">SecurityPolicy</tt>, the class interface for that has changed (see <tt class="backtick">security.py</tt>). <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span></p></li>
</ul>
<p class="line867"><strong>Enabling new features</strong> <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span></p>
<ul>
<li><p class="line891"><tt class="backtick">default_lang</tt> (default: 'en') - If user does not set a language in his user settings, this will be used. <span class="anchor" id="line-106"></span></p></li>
<li><p class="line891"><tt class="backtick">edit_locking</tt> (default: <tt class="backtick">'warn 10'</tt>) - Editor locking policy: None, 'warn &lt;timeout in minutes&gt;', or 'lock &lt;timeout in minutes&gt;'. <span class="anchor" id="line-107"></span></p></li>
<li><p class="line891"><tt class="backtick">hosts_deny</tt> (default: <tt class="backtick">[]</tt>) - a list of denied IPs; if an IP ends with a dot, it denies a whole subnet (class A, B or C). <span class="anchor" id="line-108"></span></p></li>
<li><p class="line891"><tt class="backtick">html_pagetitle</tt> (default: <tt class="backtick">None</tt>) -  Allows you to set a specific HTML page title (if not set, it defaults to the value of sitename). <span class="anchor" id="line-109"></span></p></li>
<li><p class="line891"><tt class="backtick">mail_login</tt> (default: <tt class="backtick">None</tt>) - This is only needed when you use SMTP AUTH to send mail; in that case, set this to the username and password separated by a space, i.e. "user pwd". <span class="anchor" id="line-110"></span></p></li>
<li><p class="line891"><tt class="backtick">smileys</tt> (default: <tt class="backtick">{}</tt>) -  User-defined smileys (a dict with the markup as the key and a tuple of width, height, border, image name as the value). <span class="anchor" id="line-111"></span></p></li>
<li>don't forget to read the CHANGES file in the distribution archive <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span>
</li>
</ul>
<p class="line867"><span class="anchor" id="update-1-2"></span> <span class="anchor" id="line-114"></span>
</p>
<h3 id="head-b67c2d9266310861577c255faf04abda607713c7">Version 1.2</h3>
<span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><p class="line867"><strong>Version 1.2 requires Python 2.2.2 or higher</strong>, we recommend to use Python &gt;=2.3.2 (with 2.3.x, <a href="../MoinMoin">MoinMoin</a> runs about 20-30% faster). <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span></p>
<ul>
<li><p class="line862">the URL for the <a href="../RecentChanges">RecentChanges</a> RSS feed changed. It now only works with <tt class="backtick">?action=rss_rc</tt>. <span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span></p></li>
<li class="gap">drawings use a new applet. It saves PNG instead of GIF and can do image maps to make areas of the drawing active. On display a GIF will be searched if no PNG is found. We recommend changing all GIFs to indexed PNGs cause this fallback might disappear in later versions. <span class="anchor" id="line-121"></span><p class="line862">Sample code using bash &amp; ImageMagick (be sure you know what you do): <span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span></p>
<pre>for draw in `find /path/to/wiki/data -name \*.draw`; do
<span class="anchor" id="line-124"></span>    file=`dirname $draw`/`basename $draw .draw`
<span class="anchor" id="line-125"></span>    if [ -e "${file}.gif" ]; then
<span class="anchor" id="line-126"></span>        echo "Converting ${file}.gif to ${file}.png"
<span class="anchor" id="line-127"></span>        convert "${file}.gif" "${file}.png"
<span class="anchor" id="line-128"></span>    fi
<span class="anchor" id="line-129"></span>done
<span class="anchor" id="line-130"></span></pre>
<span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span>
</li>
<li class="gap"><p class="line891"><tt class="backtick">caching_formats</tt> (default: <tt>['text_html',]</tt>) - enable caching for the given output formats; enabled by default. Developers maybe want to disable this and use the empty list. <span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span></p></li>
<li class="gap">Themeing and HTML/CSS cleanup <span class="anchor" id="line-135"></span><ul>
<li>Browsers with completely broken CSS support (like e.g. Netscape 4.x) are no longer supported. If you still need to support them, do not upgrade to moin 1.2. If you still use these browsers, we recommend that you upgrade your browser first (Mozilla 1.5 has nice and standards compliant HTML and CSS support and is available as Free Software for Windows, Linux and Mac). <span class="anchor" id="line-136"></span>
</li>
<li><p class="line862">If you changed any html in code or by config you will have to check if it still works. For the usual stuff, look into <tt class="backtick">MoinMoin/theme/classic.py</tt> and <tt class="backtick">classic/css/screen.css</tt>. For config defaults of the html fragments, read <tt class="backtick">MoinMoin/config.py</tt>. If you want to modify a theme, don't simply change classic, but copy or subclass it under a new theme name. <span class="anchor" id="line-137"></span></p></li>
<li>
<p class="line862">because of the new theme support the layout of the <tt class="backtick">htdocs</tt> directory changed: <span class="anchor" id="line-138"></span></p>
<ul>
<li><p class="line862">Instead of using icons under <tt class="backtick">img/</tt> and css under <tt class="backtick">css/</tt>, there will be an additional <tt class="backtick">themename/</tt> directory in between, e.g. <tt class="backtick">classic/img/</tt> and <tt class="backtick">classic/css/</tt>. If you added own icons, you may have to copy them to the themes directory. <span class="anchor" id="line-139"></span></p></li>
<li><p class="line862">The filename of the CSS file has changed to the media type, so the normal one used for screen output has changed name from <tt class="backtick">moinmoin.css</tt> to <tt class="backtick">screen.css</tt>. There also were quite some changes and enhancements to the CSS files, so better use the new ones. <span class="anchor" id="line-140"></span></p></li>
</ul>
</li>
<li>config.css_url was removed <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span>
</li>
</ul>
</li>
<li class="gap"><p class="line862">Plugins - we use a new plugin loader that requires a correct <tt class="backtick">__init__.py</tt> file in the plugin directories. See the directory <tt class="backtick">wiki/data/plugin/</tt> in the distribution archive and just copy it over to your wiki's plugin directory. <span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span></p></li>
<li class="gap">Do not forget to update to the new Twikidrawplugin that comes with moin 1.2. <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span>
</li>
<li class="gap">removed config variables: <span class="anchor" id="line-147"></span><ul>
<li>external_diff (not needed any more, we have internal diff now) <span class="anchor" id="line-148"></span>
</li>
<li>shared_metadb (wasn't implemented for long - we will re-add it, when it is) <span class="anchor" id="line-149"></span>
</li>
<li>title1/2 (please use page_header1/2) <span class="anchor" id="line-150"></span>
</li>
<li>page_icons_up <span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span>
</li>
</ul>
</li>
<li class="gap">changed config variables: <span class="anchor" id="line-153"></span><ul>
<li>changed_time_fmt (removed some html and brackets around time from default) <span class="anchor" id="line-154"></span>
</li>
<li>html_head (default is empty string now) <span class="anchor" id="line-155"></span>
</li>
<li>page_footer1/2 (default is empty string now) <span class="anchor" id="line-156"></span>
</li>
<li>page_icons (is now a list of icon names, not html any more) <span class="anchor" id="line-157"></span>
</li>
<li>umask (default is 0770 now, not world r/w any more == more secure) <span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span>
</li>
</ul>
</li>
<li class="gap">
<p class="line862">new config variables (see <a class="interwiki" href="http://moinmaster.wikiwikiweb.de/HelpOnConfiguration" title="MoinMaster">HelpOnConfiguration</a>): <span class="anchor" id="line-160"></span></p>
<ul>
<li>cookie_lifetime <span class="anchor" id="line-161"></span>
</li>
<li>mail_login <span class="anchor" id="line-162"></span>
</li>
<li>page_credits <span class="anchor" id="line-163"></span>
</li>
<li>page_dict_regex <span class="anchor" id="line-164"></span>
</li>
<li>page_group_regex <span class="anchor" id="line-165"></span>
</li>
<li>page_header1/2 <span class="anchor" id="line-166"></span>
</li>
<li>page_iconbar  <span class="anchor" id="line-167"></span>
</li>
<li>page_icons_table <span class="anchor" id="line-168"></span>
</li>
<li>page_license_enabled <span class="anchor" id="line-169"></span>
</li>
<li>page_license_page <span class="anchor" id="line-170"></span>
</li>
<li>theme_default <span class="anchor" id="line-171"></span>
</li>
<li>theme_force <span class="anchor" id="line-172"></span>
</li>
<li>tz_offset  <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span>
</li>
</ul>
</li>
</ul>
<p class="line867"><span class="anchor" id="update-1-2-1"></span> <span class="anchor" id="line-176"></span><span class="anchor" id="update-1-2-2"></span> <span class="anchor" id="line-177"></span><span class="anchor" id="update-1-2-3"></span> <span class="anchor" id="line-178"></span>
</p>
<h3 id="head-6b39642936e912c76ea6eec794a0ce182bf5f751">Version 1.2.1, 1.2.2, 1.2.3</h3>
<span class="anchor" id="line-179"></span><p class="line874">As 1.2.x is primarily a bug-fix release for 1.2, there is not much special if you run 1.2 and want to update to 1.2.x. <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span></p>
<p class="line874">If you run a version previous to 1.2, please read above about upgrading to 1.2 first. <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></p>
<p class="line862">In any case, read the <tt class="backtick">CHANGES</tt> file in the toplevel directory of your moin archive - all fixes are described there and also some few new features. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span></p>
<p class="line874">Be aware that except code fixes, there were also fixes in the data and htdocs directory - so please selectively copy them over to your running wiki installation. <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span></p>
<p class="line867"><span class="anchor" id="update-1-3"></span> <span class="anchor" id="line-188"></span>
</p>
<h3 id="head-885bb59e03f7d8413a74525f49383a18875e69ee">Version 1.3 and above</h3>
<span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><p class="line867"><img alt="/!\" height="15" src="../htdocs/modern/img/alert.png" title="/!\" width="15"> Upgrading to moin 1.3 will be non-trivial. It will definitely take you more than 5 minutes. <img alt="/!\" height="15" src="../htdocs/modern/img/alert.png" title="/!\" width="15"> <span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span></p>
<p class="line874">This is because of many changes to configuration, data format, filenames and pathes. <span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span></p>
<p class="line874">In any case, make a backup or you risk destroying your wiki's content. <span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span></p>
<p class="line862">Please read the files <tt class="backtick">CHANGES</tt> and <tt class="backtick">README.migration</tt> in the toplevel directory of your moin archive for details on what changed and how to upgrade. <span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span></p>
<p class="line867"><em>For this and greater versions, See <a class="interwiki" href="http://moinmoin.wikiwikiweb.de/MoinMoinUpgrade" title="MoinMoin">MoinMoinUpgrade</a>.</em> <span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span></p>
<p class="line867">
</p>
<h3 id="head-64b74b335c0bb5764150db10b4f12dc7b9b1154f">Deprecation Note</h3>
<span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line874">This page is deprecated (at least the version specific stuff on it), for 1.5 it will be gone and we will use CHANGES file exclusively. <span class="anchor" id="line-203"></span><span class="anchor" id="bottom"></span></p>
</div>
<p id="pageinfo" class="info" lang="en" dir="ltr">HelpOnUpdating  (last modified 2006-06-30 07:21:45)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar">
<li><span class="disabled">Immutable Page</span></li>
<li><a href="../HelpOnUpdating%3Faction=info">Info</a></li>
<li><a href="../HelpOnUpdating%3Faction=AttachFile">Attachments</a></li>
<li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li>
</ul>

<ul id="credits">
<li><a href="http://moinmoin.wikiwikiweb.de/">MoinMoin Powered</a></li>
<li><a href="http://www.python.org/">Python Powered</a></li>
<li><a href="http://validator.w3.org/check?uri=referer">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>
